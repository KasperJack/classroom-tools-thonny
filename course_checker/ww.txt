from thonny import get_workbench
from .checker import run_check_dialog
import os





def load_plugin():
    print("DEBUG: Course Checker plugin is loading!")
    
    # Get the directory where this plugin is located
    plugin_dir = os.path.dirname(__file__)
    icon_path = os.path.join(plugin_dir, "check.png")
    
    # Add command with toolbar image
    get_workbench().add_command(
        command_id="course_check",
        menu_name="run",
        command_label="Check Exercise",
        handler=run_check_dialog,
        image=icon_path if os.path.exists(icon_path) else None,
        include_in_toolbar=True, 
        caption="Check Exercise", 
        group=10
    )
    
